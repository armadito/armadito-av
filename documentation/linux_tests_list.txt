Uhuru-AV Linux Tests
====================
Valentin HAMON<vhamon@teclib.com>
v1.1, 2016-01

Armadito Linux Tests Checklist.

On-access scan tests
--------------------

Ubuntu 14.04 LTS 64Bit (trusty) / et /home séparé ( Avec Agent DM v1.5.9 )
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

./media tests
[width="60%",options="header"]
|=================================================
| Test        	   	 		          | Status | Notes
| Add mount mark on new  USB Key | OK  | <warning> on-access-linux: path /media/uhuru/A179-EE7E/ELF_D5AD9865DEB15395843FDAD562C8CB13 DENY (file was scanned)
| Add mount mark on existing USB Key | Not OK | USB Key existing before launching daemon
| cat /USBKEY/ELF_malwares* (12)  | OK  |
| cat /USBKEY/ELF_malwares* (100) | OK  |
|==================================================================

.configured directories tests
[width="60%",options="header"]
|=================================================
| Test        	   	 		          | Status | Notes
| Added recursively conf directory /tmp - cp unmarked_dir to marked_dir (ELF_malwares*) (12) /tmp | Not OK | /tmp/ELF_D5AD9865DEB15395843FDAD562C8CB13 ALLOW (file type is not scanned). 
| Added recursively conf directory /tmp - cp marked_dir to marked_dir (ELF_malwares*) (12) /tmp | OK | /tmp/ELF_D5AD9865DEB15395843FDAD562C8CB13 DENY (file was scanned)
| Added recursively conf directory /tmp - cat /tmp/ELF_malwares* (12) | OK | no freeze - <warning> on-access-linux: path /tmp/ELF_D5AD9865DEB15395843FDAD562C8CB13 DENY (file was scanned)
| Added recursively conf directory /tmp - cp marked_dir to market_dir (ELF_malwares*) (100) /tmp | OK | no freeze - /media/uhuru/A179-EE7E/MALWARE_ELF_LINUX_100_files/ELF_D5AD9865DEB15395843FDAD562C8CB13 DENY (file was scanned)
| Added recursively conf directory /tmp - cp unmarked_dir to market_dir (ELF_malwares*) (100) /tmp | Not OK | /tmp/ELF_D5AD9865DEB15395843FDAD562C8CB13 ALLOW (file type is not scanned)
| Added recursively conf directory /tmp - cp marked_dir to unmarket_dir (ELF_malwares*) (100) /tmp | OK | /tmp/ELF_D5AD9865DEB15395843FDAD562C8CB13 DENY (file was scanned)
| Added recursively conf directory /tmp - cat /tmp/ELF_no_malwares* (83) | OK | exécution instantanée
| Added recursively conf directory /tmp - cat /tmp/ELF_malwares* (100) | OK | quasi instantanée 
| Added subdirectory in already marked dir | OK | 
| Rm subdirectory in already marked dir | OK | 
|==================================================================

Ubuntu 14.04 LTS 64Bit (trusty) / et /home non séparé + PC Chiffré ( Sans Agent DM )
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

./media tests
[width="60%",options="header"]
|=================================================
| Test        	   	 		          | Status | Notes
| Add dir mark on new  USB Key | Not OK  | Certains malwares sont passés entre les mailles du filet à cause d'erreurs du type "bad file descriptor"
| Add dir mark on existing USB Key | Not OK  |
|==================================================================


.configured directories tests 
[width="60%",options="header"]
|=================================================
| Test        	   	 		          | Status | Notes
| Added recursively conf directory /tmp - cp unmarked_dir to marked_dir (ELF_malwares*) (12) /tmp | Not OK | not scanned.
| Added recursively conf directory /tmp - cp marked_dir to marked_dir (ELF_malwares*) (12) /tmp | OK | 
| Added recursively conf directory /tmp - cat /tmp/ELF_malwares* (12) | OK | 
| Added recursively conf directory /tmp - cp marked_dir to market_dir (ELF_malwares*) (100) /tmp | OK | 
| Added recursively conf directory /tmp - cp unmarked_dir to market_dir (ELF_malwares*) (100) /tmp | Not OK | not scanned. 
| Added recursively conf directory /tmp - cp marked_dir to unmarket_dir (ELF_malwares*) (100) /tmp | OK |
| Added recursively conf directory /tmp - cat /tmp/ELF_no_malwares* (83) | OK |
| Added recursively conf directory /tmp - cat /tmp/ELF_malwares* (100) | OK |  
| Added subdirectory in already marked dir | OK | 
| Rm subdirectory in already marked dir | OK | 
|==================================================================

Ubuntu 14.04 LTS 64Bit (trusty) / et /home non séparé + PC Chiffré ( Avec Agent DM v1.5.9 )
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

./media tests
[width="60%",options="header"]
|=================================================
| Test        	   	 		          | Status | Notes
| Add dir mark on new  USB Key | OK  |
| Add dir mark on existing USB Key | OK  |
|==================================================================


.configured directories tests 
[width="60%",options="header"]
|=================================================
| Test        	   	 		          | Status | Notes
| Added recursively conf directory /tmp - cp unmarked_dir to marked_dir (ELF_malwares*) (12) /tmp | TODO | 
| Added recursively conf directory /tmp - cp marked_dir to marked_dir (ELF_malwares*) (12) /tmp | TODO | 
| Added recursively conf directory /tmp - cat /tmp/ELF_malwares* (12) | TODO | 
| Added recursively conf directory /tmp - cp marked_dir to market_dir (ELF_malwares*) (100) /tmp | TODO | 
| Added recursively conf directory /tmp - cp unmarked_dir to market_dir (ELF_malwares*) (100) /tmp | TODO | 
| Added recursively conf directory /tmp - cp marked_dir to unmarket_dir (ELF_malwares*) (100) /tmp | TODO |
| Added recursively conf directory /tmp - cat /tmp/ELF_no_malwares* (83) | TODO |
| Added recursively conf directory /tmp - cat /tmp/ELF_malwares* (100) | TODO |  
| Added subdirectory in already marked dir | TODO | 
| Rm subdirectory in already marked dir | TODO | 
|==================================================================


On-demand scan tests
--------------------

Ubuntu 14.04 LTS 64Bit (trusty) / et /home ensemble + PC chiffré
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

. on-access + on-demand
[width="60%",options="header"]
|=================================================
| Test        	   	 		          | Status | Notes
| Scan USB Key On-demand log-level=debug | Not OK  | Freeze 5 sec, mais impossible à reproduire
| Scan USB Key On-demand log-level=warning | OK | No Freeze
|==================================================================


Ubuntu 14.04 LTS 64Bit (trusty) / et /home séparé
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.Samba tests
[width="60%",options="header"]
|==================================================================
| Test        	   			     | Status | Notes
| Server Samba 12.04 LTS + Client mount CIFS | OK     | sudo mount -t cifs //n5precise32a/share ~/mnt/precise_cifs -o username=uhuru,noexec
| Server Samba 14.04 LTS + Client mount CIFS | OK     | sudo mount -t cifs //n5samba/samba_shared ~/mnt/trusty_cifs -o username=uhuru,noexec
| Server Samba 12.04 LTS + Client mount SMBFS | DEPRECATED  | 
| Server Samba 14.04 LTS + Client mount SMBFS | DEPRECATED  | 
|==================================================================

.Mounted devices
[width="60%",options="header"]
|=================================================
| Test        	   	 	      | Status | Notes
| USB Key - FAT32	 	      | OK     |
| USB Key - NTFS	 	      | TODO   |
| USB Key - EXT4	 	      | TODO   |
| Android Nexus 4 - MTP Protocol      | Not OK | Unable to scan mounted gvfsd-fuse on /run/user/1000/gvfs type fuse.gvfsd-fuse (rw,nosuid,nodev,user=uhuru)
| Uhuru Mobile Nexus 5 - MTP Protocol | Not OK | Unable to scan mounted gvfsd-fuse on /run/user/1000/gvfs type fuse.gvfsd-fuse (rw,nosuid,nodev,user=uhuru)
|=================================================


Ubuntu 12.04 LTS 32Bit (precise)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.Samba tests
[width="60%",options="header"]
|=================================================
| Test        	   	 		     | Status | Notes
| Server Samba 12.04 LTS + Client mount CIFS | TODO   |
| Server Samba 14.04 LTS + Client mount CIFS | TODO   |
| Server Samba 12.04 LTS + Client mount SMBFS | TODO  | 
| Server Samba 14.04 LTS + Client mount SMBFS | TODO  | 
|==================================================================

